import{a as L,S as w,i as u}from"./assets/vendor-LKfbwt14.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const x="47506069-50a24acca197abc732faaa7f2";async function p(a,e=1){return(await L("https://pixabay.com/api/",{params:{key:x,q:a,image_type:"photo",orientation:"horizontal",safesearch:!0,page:e,per_page:15}})).data}function g(a){return a.map(({largeImageURL:o,webformatURL:n,likes:t,views:r,comments:l,downloads:y,id:v,tags:b})=>`<li class="gallery-card" data-id="${v}">
      <a class="gallery-link" href="${o}">
  <img class="pixabay-img" src="${n}" alt="${b}" width="360" height="160"/>
  </a>
  <div class="wrapper-card-text">
  <p class="card-text">Likes <span>${t}</span></p>
   <p class="card-text">Views <span>${r}</span></p>
    <p class="card-text">Comments <span>${l}</span></p>
     <p class="card-text">Downloads <span>${y}</span></p>
  </div>
  </li>`).join("")}function f(){return new w(".gallery a",{captionsData:"alt",captionDelay:"250",className:"wrapper"}).refresh()}function S(){return u.show({theme:"dark",iconUrl:"../img/icons/alert.svg",imageWidth:"24px",position:"topRight",message:"Sorry, there are no images matching your search query. Please try again!",messageColor:"#fff",messageSize:"16px",messageLineHeight:"24px",backgroundColor:"#EF4040",timeout:5e3,displayMode:1})}function h(){return u.show({theme:"dark",iconUrl:"../img/icons/alert.svg",imageWidth:"24px",position:"topRight",message:" We are sorry, but you have reached the end of search results.",messageColor:"#fff",messageSize:"16px",messageLineHeight:"24px",backgroundColor:"#EF4040",timeout:5e3,displayMode:1})}const q=document.querySelector(".form-search-img"),d=document.querySelector(".gallery"),s=document.querySelector(".load-more-btn");document.querySelector(".loader");let i=1,c,m;q.addEventListener("submit",M);async function M(a){if(a.preventDefault(),s.classList.remove("load-more-visible"),i=1,m=a.target.elements.titleImage.value.trim(),!!m){d.innerHTML="";try{d.insertAdjacentHTML("afterbegin",'<div class="loader" ></div>');const e=document.querySelector(".loader"),o=await p(m,i);if(console.log(o),e.remove(),o.hits.length===0)throw e.remove(),new Error("There are no images matching your search query");if(c=Math.ceil(o.totalHits/15),i>c)throw e.remove(),new Error("Ran out of pictures");d.insertAdjacentHTML("beforeend",g(o.hits)),f(),s.classList.add("load-more-visible"),i===c&&s.classList.remove("load-more-visible")}catch(e){d.insertAdjacentHTML("afterbegin",'<div class="loader" ></div>'),document.querySelector(".loader").remove(),s.classList.remove("load-more-visible"),e.message=="There are no images matching your search query"?S():e.message=="Ran out of pictures"&&h()}finally{a.target.elements.titleImage.value=""}}}s.addEventListener("click",async()=>{try{s.classList.remove("load-more-visible"),s.insertAdjacentHTML("afterend",'<div class="loader" ></div>');const a=document.querySelector(".loader");i+=1;const e=await p(m,i);if(a.remove(),c=Math.ceil(e.totalHits/15),i>c)throw new Error;d.insertAdjacentHTML("beforeend",g(e.hits)),f();const n=document.querySelector(".gallery-card").getBoundingClientRect().height;window.scrollBy({left:0,top:n*2,behavior:"smooth"}),s.classList.add("load-more-visible")}catch{if(s.insertAdjacentHTML("afterend",'<div class="loader" ></div>'),document.querySelector(".loader").remove(),s.classList.remove("load-more-visible"),i>c)return h()}});
//# sourceMappingURL=index.js.map
